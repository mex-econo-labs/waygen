const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SearchBar-SIN3yldU.js","assets/vendor-BeRQyJBT.js","assets/mapbox-C3udIXGP.js","assets/turf-DdeSyY1S.js","assets/utils-P9aiU5u9.js","assets/mapbox-gl-geocoder-BCYwfNyN.css","assets/MapContainer-BE4WlgPM.js","assets/MapContainer-jpWXR4Z0.css"])))=>i.map(i=>d[i]);
import{r as O,a as ot,c as it,X as Fe,b as at,A as rt,S as Oe,d as lt,P as ct,T as Re,U as dt,R as ut,e as mt,M as pt,C as gt,f as ht,D as ft,g as xt,h as bt,i as pe}from"./vendor-BeRQyJBT.js";import{p as _,d as ie,a as wt,b as te,c as de,e as $e,t as Te,f as yt,l as fe,g as vt,h as ke,i as jt,j as Ae,k as Nt,m as be}from"./turf-DdeSyY1S.js";import{J as _e,F as St}from"./utils-P9aiU5u9.js";import"./mapbox-C3udIXGP.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function o(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=o(n);fetch(n.href,a)}})();var We={exports:{}},ge={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pt=O,Mt=Symbol.for("react.element"),Tt=Symbol.for("react.fragment"),kt=Object.prototype.hasOwnProperty,At=Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Et={key:!0,ref:!0,__self:!0,__source:!0};function He(e,s,o){var i,n={},a=null,r=null;o!==void 0&&(a=""+o),s.key!==void 0&&(a=""+s.key),s.ref!==void 0&&(r=s.ref);for(i in s)kt.call(s,i)&&!Et.hasOwnProperty(i)&&(n[i]=s[i]);if(e&&e.defaultProps)for(i in s=e.defaultProps,s)n[i]===void 0&&(n[i]=s[i]);return{$$typeof:Mt,type:e,key:a,ref:r,props:n,_owner:At.current}}ge.Fragment=Tt;ge.jsx=He;ge.jsxs=He;We.exports=ge;var t=We.exports,we={},Ee=ot;we.createRoot=Ee.createRoot,we.hydrateRoot=Ee.hydrateRoot;const Lt="modulepreload",Dt=function(e){return"/"+e},Le={},ze=function(s,o,i){let n=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),c=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));n=Promise.allSettled(o.map(m=>{if(m=Dt(m),m in Le)return;Le[m]=!0;const h=m.endsWith(".css"),P=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${P}`))return;const d=document.createElement("link");if(d.rel=h?"stylesheet":Lt,h||(d.as="script"),d.crossOrigin="",d.href=m,c&&d.setAttribute("nonce",c),document.head.appendChild(d),h)return new Promise((M,f)=>{d.addEventListener("load",M),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(r){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=r,window.dispatchEvent(c),!c.defaultPrevented)throw r}return n.then(r=>{for(const c of r||[])c.status==="rejected"&&a(c.reason);return s().catch(a)})},Ct=.85,It=5.5,De=0,Z={"mini-4-pro":{name:"DJI Mini 4 Pro",hfov:82.1,photoInterval:5.5,maxFlightTime:31},"mini-5-pro":{name:"DJI Mini 5 Pro",hfov:84,photoInterval:5.5,maxFlightTime:40,isDefault:!0},"mavic-4-pro":{name:"DJI Mavic 4 Pro",hfov:72,photoInterval:5.5,maxFlightTime:40},custom:{name:"Custom",hfov:null,photoInterval:5.5,maxFlightTime:null}},Ft=()=>Object.keys(Z).find(e=>Z[e].isDefault)||Object.keys(Z)[0],le=e=>{const s=je(e);return Z[s]||null},Ot=()=>Object.keys(Z),je=e=>({dji_mini_4_pro:"mini-4-pro",dji_mini_5_pro:"mini-5-pro",dji_mavic_4_pro:"mavic-4-pro",custom:"custom"})[e]||e,yn=(e,s,o,i)=>{if(!e||!s||!i)return null;const n=2*s*Math.tan(i*Math.PI/360),a=n*(3/4),r=n/2,c=a/2,m=Math.sqrt(r*r+c*c),h=Math.atan2(r,c)*180/Math.PI,P=180-h,d=180+h,M=360-h,f=_([e.lng,e.lat]),w=ie(f,m/1e3,o+h,{units:"kilometers"}),k=ie(f,m/1e3,o+P,{units:"kilometers"}),u=ie(f,m/1e3,o+d,{units:"kilometers"}),S=ie(f,m/1e3,o+M,{units:"kilometers"}),b=[[w.geometry.coordinates,k.geometry.coordinates,u.geometry.coordinates,S.geometry.coordinates,w.geometry.coordinates]];return wt(b,{altitude:s,heading:o,hfov:i})},Ge=(e,s)=>{const o=_([e.lng,e.lat]),i=_([s.lng,s.lat]);return te(o,i,{units:"meters"})},Be=(e,s)=>{if(!e||e.length<2||!s||s<=0)return{maxSpeed:0,minDistance:0};const o=[];for(let a=0;a<e.length-1;a++){const r=Ge(e[a],e[a+1]);o.push(r)}const i=Math.min(...o),n=i/s;return{maxSpeed:Math.max(0,n),minDistance:i}},Rt=(e,s)=>{if(!s||s<=0)return De;const i=e/s+De;return Math.round(i)},$t=(e,s)=>{if(!s||s<=0)return"safe";const o=s*60,i=o*Ct;return e>=o?"critical":e>=i?"warning":"safe"};function ae(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const s=Math.random()*16|0;return(e==="x"?s:s&3|8).toString(16)})}const z=it((e,s)=>({waypoints:[],selectedIds:[],mapRef:null,currentMissionFilename:null,calculatedMaxSpeed:0,minSegmentDistance:0,past:[],future:[],settings:(()=>{const o=Ft(),i=je(o),n=Z[i];return{altitude:60,speed:10,gimbalPitch:-90,customFOV:(n==null?void 0:n.hfov)||82.1,showFootprints:!1,footprintColor:"#22c55e",sideOverlap:80,frontOverlap:80,pathType:"grid",angle:0,autoDirection:!1,generateEveryPoint:!1,eliminateExtraYaw:!1,reversePath:!1,waypointAction:"none",photoInterval:(n==null?void 0:n.photoInterval)||It,selectedDrone:o,straightenLegs:!1,units:"metric",orbitRadius:50,startAngle:0,direction:"counter-clockwise",numberOfOrbits:1,missionEndAction:"goHome"}})(),setWaypoints:o=>e(i=>({waypoints:o,past:[...i.past,i.waypoints],future:[]})),addWaypoint:o=>e(i=>{let n=i.settings.speed,a=0;if(i.waypoints.length>0){const m=i.waypoints[i.waypoints.length-1];n=Math.round((m.speed||i.settings.speed)*10)/10,a=m.heading||0}const r={id:ae(),...o,altitude:i.settings.altitude,speed:n,gimbalPitch:i.settings.gimbalPitch,heading:a},c=[...i.waypoints];if(c.length>0){const m=c.length-1,h=c[m],P=Math.round(de([h.lng,h.lat],[r.lng,r.lat]));c[m]={...h,heading:P},r.heading=P}return{waypoints:[...c,r],past:[...i.past,i.waypoints],future:[]}}),updateSettings:o=>e(i=>({settings:{...i.settings,...o}})),selectWaypoint:(o,i)=>e(n=>({selectedIds:i?n.selectedIds.includes(o)?n.selectedIds.filter(a=>a!==o):[...n.selectedIds,o]:[o]})),setSelectedIds:o=>e({selectedIds:o}),clearSelection:()=>e({selectedIds:[]}),updateSelectedWaypoints:o=>{const{waypoints:i,selectedIds:n,past:a}=s(),r=i.map(c=>n.includes(c.id)?{...c,...o}:c);e({waypoints:r,past:[...a,i],future:[]})},updateWaypoint:(o,i)=>{const{waypoints:n,past:a}=s(),r=n.map(c=>c.id===o?{...c,...i}:c);e({waypoints:r,past:[...a,n],future:[]})},deleteSelectedWaypoints:()=>{const{waypoints:o,selectedIds:i,past:n}=s(),a=o.filter(r=>!i.includes(r.id));e({waypoints:a,selectedIds:[],past:[...n,o],future:[]})},moveWaypoints:(o,i,n)=>{const{waypoints:a,past:r}=s(),c=a.map(m=>o.includes(m.id)?{...m,lng:m.lng+i,lat:m.lat+n}:m);e({waypoints:c,past:[...r,a],future:[]})},insertWaypoint:(o,i)=>e(n=>{const a={id:ae(),...i},r=[...n.waypoints];return r.splice(o,0,a),{waypoints:r,past:[...n.past,n.waypoints],future:[],selectedIds:[a.id]}}),undo:()=>{const{past:o,future:i,waypoints:n}=s();if(o.length===0)return;const a=o[o.length-1],r=o.slice(0,o.length-1);e({waypoints:a,past:r,future:[n,...i]})},redo:()=>{const{past:o,future:i,waypoints:n}=s();if(i.length===0)return;const a=i[0],r=i.slice(1);e({waypoints:a,past:[...o,n],future:r})},setMapRef:o=>e({mapRef:o}),fitMapToWaypoints:()=>{const{mapRef:o,waypoints:i}=s();if(!o||!i||i.length===0)return;let n=i[0].lng,a=i[0].lng,r=i[0].lat,c=i[0].lat;i.forEach(h=>{h.lng<n&&(n=h.lng),h.lng>a&&(a=h.lng),h.lat<r&&(r=h.lat),h.lat>c&&(c=h.lat)});const m=[[n,r],[a,c]];o.fitBounds(m,{padding:{top:100,bottom:100,left:200,right:350},maxZoom:16,duration:3e3})},setMissionFilename:o=>e({currentMissionFilename:o}),clearMissionFilename:()=>e({currentMissionFilename:null}),calculateMissionMetrics:()=>{const{waypoints:o,settings:i}=s(),n=i.photoInterval,{maxSpeed:a,minDistance:r}=Be(o,n);e({calculatedMaxSpeed:a,minSegmentDistance:r})},getTotalDistance:()=>{const{waypoints:o}=s();if(o.length<2)return 0;let i=0;for(let n=0;n<o.length-1;n++)i+=Ge(o[n],o[n+1]);return i},getMissionTime:()=>{const{calculatedMaxSpeed:o}=s(),i=s().getTotalDistance();return Rt(i,o)},getFlightWarningLevel:()=>{const{settings:o}=s(),i=s().getMissionTime(),n=le(o.selectedDrone),a=(n==null?void 0:n.maxFlightTime)||null;return $t(i,a)},resetTrigger:0,resetMission:()=>e(o=>({waypoints:[],selectedIds:[],past:[],future:[],currentMissionFilename:null,calculatedMaxSpeed:0,minSegmentDistance:0,resetTrigger:o.resetTrigger+1}))}));function _t(e,s){const{altitude:o,speed:i,gimbalPitch:n,spacing:a,straightenLegs:r,waypointAction:c,startAngle:m,direction:h,numberOfOrbits:P}=s,d=$e(e);d.geometry.coordinates;const M=e.geometry.coordinates[0];let f=0;M.forEach($=>{f+=te(d,_($),{units:"meters"})});const w=f/M.length,k=Math.max(.1,P),u=2*Math.PI*w,S=Math.max(3,Math.round(u/a)),b=Math.round(S*k),j=[],y=m%360,L=360*k,R=Number.isInteger(k);for(let $=0;$<=b;$++){if(R&&$===b)continue;let A=$/b*L,I;h==="clockwise"?I=(y+A+360)%360:I=(y-A+360*100)%360;const T=ie(d,w/1e3,I,{units:"kilometers"}),F=Math.round(de(T,d));j.push({id:ae(),lng:T.geometry.coordinates[0],lat:T.geometry.coordinates[1],altitude:Number(o),speed:Math.round(Number(i)*10)/10,gimbalPitch:Number(n),heading:F,straightenLegs:r,action:c})}return j}function Ce(e,s){if(s.pathType==="orbit")return _t(e,s);const{altitude:o,sideOverlap:i,frontOverlap:n,angle:a,gimbalPitch:r,autoDirection:c,generateEveryPoint:m,reversePath:h,speed:P,straightenLegs:d,waypointAction:M,eliminateExtraYaw:f}=s,w=s.customFOV||82.1,k=Math.tan(w/2*(Math.PI/180)),u=o*k*2,S=u*(1-i/100),j=u*(3/4)*(1-n/100),y=S/111111,L=$e(e);let R=a;if(c){let x=0,D=0;const l=e.geometry.coordinates[0];for(let p=0;p<l.length-1;p++){const g=_(l[p]),N=_(l[p+1]),E=te(g,N);E>x&&(x=E,D=de(g,N))}R=D}const $=-R,A=Te(e,$,{pivot:L}),I=yt(A),T=[];let F=I[1]+y/2;for(;F<=I[3]+y/10;){const x=fe([[I[0]-.1,F],[I[2]+.1,F]]),D=vt(x,A),l=p=>{const g=p.geometry.coordinates;return Array.isArray(g[0][0])?be(g[0][0],g[0][g[0].length-1]):be(g[0],g[g.length-1])};if(D.features.length===0){const p=l(x);ke(p,A)&&T.push(x.geometry.coordinates)}else D.features.forEach(p=>{const g=l(p);ke(g,A)&&T.push(p.geometry.coordinates)});F+=y}const H=T.filter(x=>{const D=fe(x);return jt(D,{units:"meters"})>=j});let v=[];H.forEach((x,D)=>{let l=D%2===1?x.reverse():x;if(m){const p=_(l[0]),g=_(l[1]),N=te(p,g,{units:"meters"}),E=Math.max(1,j),C=Math.floor(N/E);if(C>=1){const q=fe(l),oe=[];for(let X=0;X<=C;X++){Ae(q,X*E/1e3,{units:"kilometers"});const he=Ae(q,X*E,{units:"meters"});oe.push(he.geometry.coordinates)}l=oe}}l.forEach((p,g)=>{const N=g===l.length-1;v.push({id:ae(),lng:p[0],lat:p[1],altitude:Number(o),speed:Math.round(Number(P)*10)/10,gimbalPitch:Number(r),heading:0,straightenLegs:d,action:M,_isRowEnd:N,_isRowStart:g===0})})});const J=[];for(let x=0;x<v.length;x++){const D=v[x];if(D._isRowEnd&&x<v.length-1){const l=v[x+1];if(te(_([D.lng,D.lat]),_([l.lng,l.lat]),{units:"meters"})<j)continue}J.push(D)}if(v=J,v.length===0)return[];const se=Nt(v.map(x=>[x.lng,x.lat]));Te(se,R,{pivot:L}).features.forEach((x,D)=>{v[D].lng=x.geometry.coordinates[0],v[D].lat=x.geometry.coordinates[1]}),h&&v.reverse();let U=null;for(let x=0;x<v.length;x++){const D=h?v[x]._isRowStart:v[x]._isRowEnd;let l=0;if(D&&x>0)l=v[x-1].heading;else if(x<v.length-1){const p=_([v[x].lng,v[x].lat]),g=_([v[x+1].lng,v[x+1].lat]);l=Math.round(de(p,g))}else x>0&&(l=v[x-1].heading);f?(U===null&&(U=l),v[x].heading=U):v[x].heading=l,delete v[x]._isRowEnd,delete v[x]._isRowStart}return v}const Wt=async(e,s,o="MiniMission",i=null)=>{const n=new _e,a=Date.now(),{speed:r,straightenLegs:c,waypointAction:m,gimbalPitch:h,missionEndAction:P,rcLostAction:d,globalTransitionalSpeed:M}=s,f=`<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:wpml="http://www.dji.com/wpmz/1.0.2">
  <Document>
    <wpml:createTime>${a}</wpml:createTime>
    <wpml:updateTime>${a}</wpml:updateTime>
    <wpml:missionConfig>
      <wpml:flyToWaylineMode>safely</wpml:flyToWaylineMode>
      <wpml:finishAction>${P}</wpml:finishAction>
      <wpml:exitOnRCLost>executeLostAction</wpml:exitOnRCLost>
      <wpml:executeRCLostAction>${d||"hover"}</wpml:executeRCLostAction>
      <wpml:globalTransitionalSpeed>${M!==void 0?M:r}</wpml:globalTransitionalSpeed>
      <wpml:droneInfo>
        <wpml:droneEnumValue>68</wpml:droneEnumValue>
        <wpml:droneSubEnumValue>0</wpml:droneSubEnumValue>
      </wpml:droneInfo>
    </wpml:missionConfig>
    <wpml:templateId>0</wpml:templateId>
  </Document>
</kml>`;let w="";e.forEach((b,j)=>{const y=j===0,L=j===e.length-1,R=j+1,$=b.straightenLegs!==void 0?b.straightenLegs:c,A=b.action!==void 0?b.action:m,I=b.gimbalPitch!==void 0?b.gimbalPitch:h,T=b.speed!==void 0?b.speed:r;let F="",H=0;const v=j>0?e[j-1]:null,J=v?v.gimbalPitch!==void 0?v.gimbalPitch:h:null;(y||J!==null&&I!==J)&&(F+=`
        <wpml:action>
          <wpml:actionId>${H++}</wpml:actionId>
          <wpml:actionActuatorFunc>gimbalRotate</wpml:actionActuatorFunc>
          <wpml:actionActuatorFuncParam>
            <wpml:gimbalHeadingYawBase>aircraft</wpml:gimbalHeadingYawBase>
            <wpml:gimbalRotateMode>absoluteAngle</wpml:gimbalRotateMode>
            <wpml:gimbalPitchRotateEnable>1</wpml:gimbalPitchRotateEnable>
            <wpml:gimbalPitchRotateAngle>${I}</wpml:gimbalPitchRotateAngle>
            <wpml:gimbalRollRotateEnable>0</wpml:gimbalRollRotateEnable>
            <wpml:gimbalYawRotateEnable>0</wpml:gimbalYawRotateEnable>
            <wpml:payloadPositionIndex>0</wpml:payloadPositionIndex>
          </wpml:actionActuatorFuncParam>
        </wpml:action>`),A==="photo"?F+=`
        <wpml:action>
          <wpml:actionId>${H++}</wpml:actionId>
          <wpml:actionActuatorFunc>takePhoto</wpml:actionActuatorFunc>
          <wpml:actionActuatorFuncParam>
            <wpml:fileSuffix>point${j}</wpml:fileSuffix>
            <wpml:payloadPositionIndex>0</wpml:payloadPositionIndex>
          </wpml:actionActuatorFuncParam>
        </wpml:action>`:A==="record_start"?F+=`
          <wpml:action>
            <wpml:actionId>${H++}</wpml:actionId>
            <wpml:actionActuatorFunc>startRecord</wpml:actionActuatorFunc>
            <wpml:actionActuatorFuncParam>
              <wpml:fileSuffix>mission</wpml:fileSuffix>
              <wpml:payloadPositionIndex>0</wpml:payloadPositionIndex>
            </wpml:actionActuatorFuncParam>
          </wpml:action>`:A==="record_stop"?F+=`
          <wpml:action>
            <wpml:actionId>${H++}</wpml:actionId>
            <wpml:actionActuatorFunc>stopRecord</wpml:actionActuatorFunc>
            <wpml:actionActuatorFuncParam>
              <wpml:payloadPositionIndex>0</wpml:payloadPositionIndex>
            </wpml:actionActuatorFuncParam>
          </wpml:action>`:A==="record"&&(y?F+=`
            <wpml:action>
              <wpml:actionId>${H++}</wpml:actionId>
              <wpml:actionActuatorFunc>startRecord</wpml:actionActuatorFunc>
              <wpml:actionActuatorFuncParam>
                <wpml:fileSuffix>mission</wpml:fileSuffix>
                <wpml:payloadPositionIndex>0</wpml:payloadPositionIndex>
              </wpml:actionActuatorFuncParam>
            </wpml:action>`:L&&(F+=`
            <wpml:action>
              <wpml:actionId>${H++}</wpml:actionId>
              <wpml:actionActuatorFunc>stopRecord</wpml:actionActuatorFunc>
              <wpml:actionActuatorFuncParam>
                <wpml:payloadPositionIndex>0</wpml:payloadPositionIndex>
              </wpml:actionActuatorFuncParam>
            </wpml:action>`));const se=H>0?`
      <wpml:actionGroup>
        <wpml:actionGroupId>${R}</wpml:actionGroupId>
        <wpml:actionGroupStartIndex>${j}</wpml:actionGroupStartIndex>
        <wpml:actionGroupEndIndex>${j}</wpml:actionGroupEndIndex>
        <wpml:actionGroupMode>sequence</wpml:actionGroupMode>
        <wpml:actionTrigger>
          <wpml:actionTriggerType>reachPoint</wpml:actionTriggerType>
        </wpml:actionTrigger>
        ${F}
      </wpml:actionGroup>`:"";let K="toPointAndPassWithContinuityCurvature",U=0;$?(K="toPointAndStopWithDiscontinuityCurvature",U=1):(U=0,y||L?K="toPointAndStopWithContinuityCurvature":K="toPointAndPassWithContinuityCurvature"),w+=`
    <Placemark>
      <Point><coordinates>${b.lng},${b.lat},0</coordinates></Point>
      <wpml:index>${j}</wpml:index>
      <wpml:executeHeight>${b.altitude}</wpml:executeHeight>
      <wpml:waypointSpeed>${T}</wpml:waypointSpeed>
      <wpml:waypointHeadingParam>
        <wpml:waypointHeadingMode>smoothTransition</wpml:waypointHeadingMode>
        <wpml:waypointHeadingAngle>${b.heading}</wpml:waypointHeadingAngle>
        <wpml:waypointHeadingAngleEnable>0</wpml:waypointHeadingAngleEnable>
        <wpml:waypointHeadingPathMode>followBadArc</wpml:waypointHeadingPathMode>
      </wpml:waypointHeadingParam>
      <wpml:waypointTurnParam>
        <wpml:waypointTurnMode>${K}</wpml:waypointTurnMode>
        <wpml:waypointTurnDampingDist>0</wpml:waypointTurnDampingDist>
      </wpml:waypointTurnParam>
      <wpml:useStraightLine>${U}</wpml:useStraightLine>
      ${se}
    </Placemark>`});const k=`<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:wpml="http://www.dji.com/wpmz/1.0.2">
  <Document>
    <wpml:missionConfig>
      <wpml:flyToWaylineMode>safely</wpml:flyToWaylineMode>
      <wpml:finishAction>${P}</wpml:finishAction>
      <wpml:exitOnRCLost>executeLostAction</wpml:exitOnRCLost>
      <wpml:executeRCLostAction>${d||"hover"}</wpml:executeRCLostAction>
      <wpml:globalTransitionalSpeed>${M!==void 0?M:r}</wpml:globalTransitionalSpeed>
      <wpml:droneInfo>
        <wpml:droneEnumValue>68</wpml:droneEnumValue>
        <wpml:droneSubEnumValue>0</wpml:droneSubEnumValue>
      </wpml:droneInfo>
    </wpml:missionConfig>
    <Folder>
      <wpml:templateId>0</wpml:templateId>
      <wpml:executeHeightMode>relativeToStartPoint</wpml:executeHeightMode>
      <wpml:waylineId>0</wpml:waylineId>
      <wpml:autoFlightSpeed>${r}</wpml:autoFlightSpeed>
      ${w}
    </Folder>
  </Document>
</kml>`,u=n.folder("wpmz");u.file("template.kml",f),u.file("waylines.wpml",k),i&&n.file("waygen_session.json",JSON.stringify(i,null,2));const S=await n.generateAsync({type:"blob"});St.saveAs(S,`${o}.kmz`)};function B(e,s){return Array.from(e.getElementsByTagName(s))}function ue(e){return e[0]==="#"?e:`#${e}`}function Ht(e,s,o){return Array.from(e.getElementsByTagNameNS(o,s))}function W(e){return e==null||e.normalize(),e&&e.textContent||""}function V(e,s,o){const i=e.getElementsByTagName(s);return i.length?i[0]:null}function G(e,s,o){const i={};if(!e)return i;const n=e.getElementsByTagName(s),a=n.length?n[0]:null;return a&&o?o(a,i):i}function ne(e,s,o){const i=W(V(e,s));return i&&o?o(i)||{}:{}}function ee(e,s,o){const i=parseFloat(W(V(e,s)));if(!isNaN(i))return o&&o(i),i}function Ve(e,s){const o={};for(const i of s)ne(e,i,n=>{o[i]=n});return o}function Ue(e){return(e==null?void 0:e.nodeType)===1}function Ke(e,s){const o={},i=s=="stroke"||s==="fill"?s:s+"-color";return e[0]==="#"&&(e=e.substring(1)),e.length===6||e.length===3?o[i]="#"+e:e.length===8&&(o[s+"-opacity"]=parseInt(e.substring(0,2),16)/255,o[i]="#"+e.substring(6,8)+e.substring(4,6)+e.substring(2,4)),o}function me(e,s,o){const i={};return ee(e,s,n=>{i[o]=n}),i}function Ne(e,s){return G(e,"color",o=>Ke(W(o),s))}function Ye(e){return G(e,"Icon",(s,o)=>(ne(s,"href",i=>{o.icon=i}),o))}function zt(e){return G(e,"IconStyle",s=>Object.assign(Ne(s,"icon"),me(s,"scale","icon-scale"),me(s,"heading","icon-heading"),G(s,"hotSpot",o=>{const i=parseFloat(o.getAttribute("x")||""),n=parseFloat(o.getAttribute("y")||""),a=o.getAttribute("xunits")||"",r=o.getAttribute("yunits")||"";return!isNaN(i)&&!isNaN(n)?{"icon-offset":[i,n],"icon-offset-units":[a,r]}:{}}),Ye(s)))}function Gt(e){return G(e,"LabelStyle",s=>Object.assign(Ne(s,"label"),me(s,"scale","label-scale")))}function Bt(e){return G(e,"LineStyle",s=>Object.assign(Ne(s,"stroke"),me(s,"width","stroke-width")))}function Vt(e){return G(e,"PolyStyle",(s,o)=>Object.assign(o,G(s,"color",i=>Ke(W(i),"fill")),ne(s,"fill",i=>{if(i==="0")return{"fill-opacity":0}}),ne(s,"outline",i=>{if(i==="0")return{"stroke-opacity":0}})))}function Se(e){return Object.assign({},Vt(e),Bt(e),Gt(e),zt(e))}const Q=e=>Number(e),ye={string:e=>e,int:Q,uint:Q,short:Q,ushort:Q,float:Q,double:Q,bool:e=>!!e};function Ze(e,s){return G(e,"ExtendedData",(o,i)=>{for(const n of B(o,"Data"))i[n.getAttribute("name")||""]=W(V(n,"value"));for(const n of B(o,"SimpleData")){const a=n.getAttribute("name")||"",r=s[a]||ye.string;i[a]=r(W(n))}return i})}function Je(e){const s=V(e,"description");for(const o of Array.from((s==null?void 0:s.childNodes)||[]))if(o.nodeType===4)return{description:{"@type":"html",value:W(o)}};return{}}function qe(e){return G(e,"TimeSpan",s=>({timespan:{begin:W(V(s,"begin")),end:W(V(s,"end"))}}))}function Xe(e){return G(e,"TimeStamp",s=>({timestamp:W(V(s,"when"))}))}function Qe(e,s){return ne(e,"styleUrl",o=>(o=ue(o),s[o]?Object.assign({styleUrl:o},s[o]):{styleUrl:o}))}const Ut=/\s*/g,Kt=/^\s*|\s*$/g,Yt=/\s+/;function et(e){return e.replace(Ut,"").split(",").map(parseFloat).filter(s=>!isNaN(s)).slice(0,3)}function ve(e){return e.replace(Kt,"").split(Yt).map(et).filter(s=>s.length>=2)}function Zt(e){let s=B(e,"coord");s.length===0&&(s=Ht(e,"coord","*"));const o=s.map(i=>W(i).split(" ").map(parseFloat));return o.length===0?null:{geometry:o.length>2?{type:"LineString",coordinates:o}:{type:"Point",coordinates:o[0]},times:B(e,"when").map(i=>W(i))}}function tt(e){if(e.length===0)return e;const s=e[0],o=e[e.length-1];let i=!0;for(let n=0;n<Math.max(s.length,o.length);n++)if(s[n]!==o[n]){i=!1;break}return i?e:e.concat([e[0]])}function ce(e){return W(V(e,"coordinates"))}function nt(e){let s=[],o=[];for(let i=0;i<e.childNodes.length;i++){const n=e.childNodes.item(i);if(Ue(n))switch(n.tagName){case"MultiGeometry":case"MultiTrack":case"gx:MultiTrack":{const a=nt(n);s=s.concat(a.geometries),o=o.concat(a.coordTimes);break}case"Point":{const a=et(ce(n));a.length>=2&&s.push({type:"Point",coordinates:a});break}case"LinearRing":case"LineString":{const a=ve(ce(n));a.length>=2&&s.push({type:"LineString",coordinates:a});break}case"Polygon":{const a=[];for(const r of B(n,"LinearRing")){const c=tt(ve(ce(r)));c.length>=4&&a.push(c)}a.length&&s.push({type:"Polygon",coordinates:a});break}case"Track":case"gx:Track":{const a=Zt(n);if(!a)break;const{times:r,geometry:c}=a;s.push(c),r.length&&o.push(r);break}}}return{geometries:s,coordTimes:o}}function Jt(e){return e.length===0?null:e.length===1?e[0]:{type:"GeometryCollection",geometries:e}}function qt(e,s,o,i){var h;const{coordTimes:n,geometries:a}=nt(e),r=Jt(a);if(!r&&i.skipNullGeometry)return null;const c={type:"Feature",geometry:r,properties:Object.assign(Ve(e,["name","address","visibility","open","phoneNumber","description"]),Je(e),Qe(e,s),Se(e),Ze(e,o),qe(e),Xe(e),n.length?{coordinateProperties:{times:n.length===1?n[0]:n}}:{})};((h=c.properties)==null?void 0:h.visibility)!==void 0&&(c.properties.visibility=c.properties.visibility!=="0");const m=e.getAttribute("id");return m!==null&&m!==""&&(c.id=m),c}function Xt(e){return V(e,"gx:LatLonQuad")?{geometry:{type:"Polygon",coordinates:[tt(ve(ce(e)))]}}:tn(e)}const Qt=Math.PI/180;function en(e,s,o){const i=[(e[0]+e[2])/2,(e[1]+e[3])/2];return[s[0].map(n=>{const a=n[1]-i[1],r=n[0]-i[0],c=Math.sqrt(Math.pow(a,2)+Math.pow(r,2)),m=Math.atan2(a,r)+o*Qt;return[i[0]+Math.cos(m)*c,i[1]+Math.sin(m)*c]})]}function tn(e){const s=V(e,"LatLonBox");if(s){const o=ee(s,"north"),i=ee(s,"west"),n=ee(s,"east"),a=ee(s,"south"),r=ee(s,"rotation");if(typeof o=="number"&&typeof a=="number"&&typeof i=="number"&&typeof n=="number"){const c=[i,a,n,o];let m=[[[i,o],[n,o],[n,a],[i,a],[i,o]]];return typeof r=="number"&&(m=en(c,m,r)),{bbox:c,geometry:{type:"Polygon",coordinates:m}}}}return null}function nn(e,s,o,i){var m;const n=Xt(e),a=(n==null?void 0:n.geometry)||null;if(!a&&i.skipNullGeometry)return null;const r={type:"Feature",geometry:a,properties:Object.assign({"@geometry-type":"groundoverlay"},Ve(e,["name","address","visibility","open","phoneNumber","description"]),Je(e),Qe(e,s),Se(e),Ye(e),Ze(e,o),qe(e),Xe(e))};n!=null&&n.bbox&&(r.bbox=n.bbox),((m=r.properties)==null?void 0:m.visibility)!==void 0&&(r.properties.visibility=r.properties.visibility!=="0");const c=e.getAttribute("id");return c!==null&&c!==""&&(r.id=c),r}function sn(e){let s=e.getAttribute("id");const o=e.parentNode;return!s&&Ue(o)&&o.localName==="CascadingStyle"&&(s=o.getAttribute("kml:id")||o.getAttribute("id")),ue(s||"")}function on(e){const s={};for(const o of B(e,"Style"))s[sn(o)]=Se(o);for(const o of B(e,"StyleMap")){const i=ue(o.getAttribute("id")||"");ne(o,"styleUrl",n=>{n=ue(n),s[n]&&(s[i]=s[n])})}return s}function an(e){const s={};for(const o of B(e,"SimpleField"))s[o.getAttribute("name")||""]=ye[o.getAttribute("type")||""]||ye.string;return s}function*rn(e,s={skipNullGeometry:!1}){const o=on(e),i=an(e);for(const n of B(e,"Placemark")){const a=qt(n,o,i,s);a&&(yield a)}for(const n of B(e,"GroundOverlay")){const a=nn(n,o,i,s);a&&(yield a)}}function Ie(e,s={skipNullGeometry:!1}){return{type:"FeatureCollection",features:Array.from(rn(e,s))}}const ln=async e=>{if(e.name.toLowerCase().endsWith(".kml")){const s=await e.text(),o=new DOMParser().parseFromString(s,"text/xml");return{geojson:Ie(o),sessionData:null}}if(e.name.toLowerCase().endsWith(".kmz"))try{const s=await _e.loadAsync(e);let o=Object.keys(s.files).find(i=>i.toLowerCase().endsWith("waylines.wpml"));if(o||(o=Object.keys(s.files).find(i=>i.toLowerCase().endsWith(".kml"))),o){const i=await s.file(o).async("text"),n=new DOMParser().parseFromString(i,"text/xml"),a=Ie(n),r=Array.from(n.getElementsByTagName("Placemark")),c=(d,M)=>{let f=d.getElementsByTagName("wpml:"+M);if(f.length>0||(f=d.getElementsByTagName(M),f.length>0))return f[0].textContent;const w=d.getElementsByTagName("*");for(let k=0;k<w.length;k++)if(w[k].localName===M)return w[k].textContent;return null},m=a.features.length===r.length;if(a.features.forEach((d,M)=>{if(d.geometry.type==="Point"){let f=null;if(m)f=r[M];else{const[w,k]=d.geometry.coordinates;f=r.find(u=>{var R;const S=u.getElementsByTagName("Point")[0];if(!S)return!1;const j=(((R=S.getElementsByTagName("coordinates")[0])==null?void 0:R.textContent)||"").trim().split(",");if(j.length<2)return!1;const y=Number(j[0]),L=Number(j[1]);return Math.abs(y-w)<1e-4&&Math.abs(L-k)<1e-4})}if(f){let w=c(f,"waypointHeading");w===null&&(w=c(f,"waypointHeadingAngle"));const k=c(f,"waypointSpeed");let u=c(f,"ellipsoidHeight");u===null&&(u=c(f,"height")),u===null&&(u=c(f,"executeHeight"));const S=c(f,"gimbalPitchAngle");w!==null&&(d.properties.heading=Number(w)),k!==null&&(d.properties.speed=Number(k)),u!==null&&(d.properties.altitude=Number(u)),S!==null&&(d.properties.gimbalPitch=Number(S))}}}),!a||!a.features||a.features.length===0)throw new Error("No features found in KML/WPML file.");let h=null;const P=s.file("waygen_session.json");if(P)try{const d=await P.async("text");h=JSON.parse(d)}catch(d){console.warn("Failed to parse session data:",d)}return{geojson:a,sessionData:h}}else throw new Error("No valid KML or WPML file found inside KMZ.")}catch(s){throw console.error("KMZ Parse Error:",s),new Error("Failed to unzip or parse KMZ.")}throw new Error("Unsupported file format. Please use .kml or .kmz")},st=3.28084,Y=(e,s)=>s==="metric"?e:Number((e*st).toFixed(2)),re=(e,s)=>s==="metric"?e:e/st;function cn({isOpen:e,onClose:s,onDownload:o,defaultFilename:i,defaultMissionEndAction:n,units:a="metric"}){const[r,c]=O.useState(""),[m,h]=O.useState("goHome"),[P,d]=O.useState("hover"),[M,f]=O.useState(""),[w,k]=O.useState("");O.useEffect(()=>{e&&(c(i),h(n),d("hover"),f(Y(5,a).toFixed(1)),k(""))},[e,i,n,a]);const u=y=>y.replace(/[^a-zA-Z0-9_-]/g,"_").substring(0,100).trim(),S=y=>{const L=u(y.target.value);c(L),k(L.length===0?"Filename cannot be empty":"")},b=()=>{if(!r||r.length===0){k("Filename cannot be empty");return}o({filename:r,missionEndAction:m,rcLostAction:P,globalTransitionalSpeed:re(Number(M),a)}),s()},j=y=>{y.key==="Escape"?s():y.key==="Enter"&&!w&&r&&b()};return e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:s,children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-96 max-w-full mx-4",onClick:y=>y.stopPropagation(),onKeyDown:j,children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[t.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Export Mission"}),t.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(Fe,{size:20})})]}),t.jsxs("div",{className:"p-4 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-bold text-gray-700 mb-2 block",children:"Mission End Action"}),t.jsxs("select",{value:m,onChange:y=>h(y.target.value),className:"w-full border rounded p-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none",children:[t.jsx("option",{value:"goHome",children:"Return to Home"}),t.jsx("option",{value:"autoLand",children:"Hover"})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:m==="goHome"?"Drone will return to launch point after mission":"Drone will hover at final waypoint"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-bold text-gray-700 mb-2 block",children:"Action when RC Signal Lost"}),t.jsxs("select",{value:P,onChange:y=>d(y.target.value),className:"w-full border rounded p-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none",children:[t.jsx("option",{value:"hover",children:"Hover"}),t.jsx("option",{value:"goHome",children:"Return to Home"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"text-sm font-bold text-gray-700 mb-2 block",children:["Global Mission Speed (",a==="metric"?"m/s":"ft/s",")"]}),t.jsx("input",{type:"number",min:"0.1",step:"0.1",value:M,onChange:y=>f(y.target.value),className:"w-full border rounded p-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Speed to fly to first waypoint"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-bold text-gray-700 mb-2 block",children:"File Name"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"text",value:r,onChange:S,className:`flex-1 border rounded p-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none ${w?"border-red-500":""}`,placeholder:"Enter filename"}),t.jsx("span",{className:"text-sm text-gray-500 font-medium",children:".kmz"})]}),w&&t.jsx("p",{className:"text-xs text-red-500 mt-1",children:w}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Allowed: letters, numbers, hyphens, underscores"})]})]}),t.jsxs("div",{className:"flex items-center justify-end gap-2 p-4 border-t bg-gray-50",children:[t.jsx("button",{onClick:s,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 font-medium transition-colors",children:"Cancel"}),t.jsx("button",{onClick:b,disabled:!!w||!r,className:"px-4 py-2 bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium rounded text-sm transition-colors",children:"Download"})]})]})}):null}function dn({isOpen:e,onClose:s,warningLevel:o,missionTime:i,droneName:n,maxFlightTime:a}){if(!e)return null;const r=o==="critical",m=r?at:rt,h=r?"text-red-500":"text-yellow-500",P=r?"bg-red-50":"bg-yellow-50",d=r?"border-red-200":"border-yellow-200",M=r?`Mission time (${i}) exceeds the ${n} maximum flight duration (~${a} minutes).`:`Mission time (${i}) is approaching the ${n} maximum flight duration (~${a} minutes).`;return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:s,children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-96 max-w-full mx-4",onClick:f=>f.stopPropagation(),children:[t.jsxs("div",{className:`flex items-center justify-between p-4 border-b ${d} ${P}`,children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(m,{size:24,className:h}),t.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Flight Duration Warning"})]}),t.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(Fe,{size:20})})]}),t.jsxs("div",{className:"p-4 space-y-4",children:[t.jsx("p",{className:"text-sm text-gray-700",children:M}),t.jsxs("div",{className:`p-3 rounded border ${d} ${P}`,children:[t.jsx("p",{className:"text-sm font-bold text-gray-700 mb-2",children:"Consider:"}),t.jsxs("ul",{className:"text-sm text-gray-600 space-y-1.5 list-disc list-inside",children:[t.jsx("li",{children:"Reducing waypoint coverage area"}),t.jsx("li",{children:"Increasing spacing/overlap settings"}),t.jsx("li",{children:"Splitting into multiple missions"})]})]}),t.jsx("p",{className:"text-xs text-gray-500 italic",children:"You can proceed, but ensure sufficient battery for the mission."})]}),t.jsx("div",{className:"flex items-center justify-end gap-2 p-4 border-t bg-gray-50",children:t.jsx("button",{onClick:s,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded text-sm transition-colors",children:"OK, Got It"})})]})})}function un({selectedWaypoints:e,selectedIds:s,waypoints:o,settings:i,onUpdate:n,onDelete:a,onInsert:r}){const[c,m]=O.useState({}),[h,P]=O.useState(!1),d=s.length===2&&o&&(()=>{const u=s.map(S=>o.findIndex(b=>b.id===S)).sort((S,b)=>S-b);return u[0]!==-1&&u[1]!==-1&&u[1]-u[0]===1})(),M=()=>{if(!d)return;const u=s.map(T=>o.findIndex(F=>F.id===T)).sort((T,F)=>T-F),S=u[0],b=o[S],j=o[u[1]],y=_([b.lng,b.lat]),L=_([j.lng,j.lat]),R=be(y,L),[$,A]=R.geometry.coordinates,I={lat:A,lng:$,altitude:b.altitude,speed:b.speed,gimbalPitch:b.gimbalPitch,heading:b.heading,straightenLegs:b.straightenLegs,action:b.action};r(S+1,I)};O.useEffect(()=>{if(e.length===0)return;const u=e[0],S=A=>A.straightenLegs!==void 0?A.straightenLegs.toString():i.straightenLegs?"true":"false",b=A=>A.action?A.action:i.waypointAction==="photo"?"photo":"none",j=S(u),y=b(u),L=A=>e.every(I=>I[A]===u[A]),R=(A,I)=>e.every(T=>A(T)===I),$={lat:s.length===1?u.lat:"",lng:s.length===1?u.lng:"",altitude:L("altitude")?Y(u.altitude,i.units):"",speed:L("speed")?Y(u.speed,i.units):"",gimbalPitch:L("gimbalPitch")?u.gimbalPitch:"",heading:L("heading")?u.heading:"",straightenLegs:R(S,j)?j:"mixed",action:R(b,y)?y:"mixed"};m($),P(!1)},[s,e,i]);const f=(u,S)=>{m(b=>({...b,[u]:S})),P(!0)},w=()=>{const u={};s.length===1&&(u.lat=Number(c.lat),u.lng=Number(c.lng)),c.altitude!==""&&(u.altitude=re(Number(c.altitude),i.units)),c.speed!==""&&(u.speed=re(Number(c.speed),i.units)),c.gimbalPitch!==""&&(u.gimbalPitch=Number(c.gimbalPitch)),c.heading!==""&&(u.heading=Number(c.heading)),c.straightenLegs!=="mixed"&&(u.straightenLegs=c.straightenLegs==="true"),c.action!=="mixed"&&(u.action=c.action),n(u),P(!1)},k=s.length===1;return t.jsxs("div",{className:"p-4 bg-gray-50 h-full border-l w-80 flex flex-col shadow-xl z-10 overflow-y-auto",children:[t.jsxs("h2",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[t.jsx(Oe,{size:20})," Edit Selected (",s.length,")"]}),k&&t.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-bold text-gray-500",children:"Lat"}),t.jsx("input",{type:"number",className:"border p-2 rounded w-full text-xs",value:c.lat,onChange:u=>f("lat",u.target.value)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-bold text-gray-500",children:"Lng"}),t.jsx("input",{type:"number",className:"border p-2 rounded w-full text-xs",value:c.lng,onChange:u=>f("lng",u.target.value)})]})]}),t.jsxs("label",{className:"text-xs font-bold text-gray-500",children:["Altitude (",i.units==="metric"?"m":"ft",")"]}),t.jsx("input",{type:"number",className:"border p-2 rounded w-full mb-4",placeholder:c.altitude===""?"Mixed":"",value:c.altitude,onChange:u=>f("altitude",u.target.value)}),t.jsxs("label",{className:"text-xs font-bold text-gray-500",children:["Speed (",i.units==="metric"?"m/s":"ft/s",")"]}),t.jsx("input",{type:"number",className:"border p-2 rounded w-full mb-4",placeholder:c.speed===""?"Mixed":"",value:c.speed,onChange:u=>f("speed",u.target.value)}),t.jsx("label",{className:"text-xs font-bold text-gray-500",children:"Gimbal Pitch (°)"}),t.jsx("input",{type:"number",className:"border p-2 rounded w-full mb-4",placeholder:c.gimbalPitch===""?"Mixed":"",value:c.gimbalPitch,onChange:u=>f("gimbalPitch",u.target.value)}),t.jsx("label",{className:"text-xs font-bold text-gray-500",children:"Heading (°)"}),t.jsx("input",{type:"number",className:"border p-2 rounded w-full mb-4",placeholder:c.heading===""?"Mixed":"",value:c.heading,onChange:u=>f("heading",u.target.value)}),t.jsx("label",{className:"text-xs font-bold text-gray-500",children:"Turn Mode"}),t.jsxs("select",{className:"border p-2 rounded w-full mb-4 text-sm bg-white",value:c.straightenLegs,onChange:u=>f("straightenLegs",u.target.value),children:[t.jsx("option",{value:"mixed",disabled:!0,hidden:!0,children:"Mixed"}),t.jsx("option",{value:"false",children:"Curved (Continuous)"}),t.jsx("option",{value:"true",children:"Straight (Stop & Turn)"})]}),t.jsx("label",{className:"text-xs font-bold text-gray-500",children:"Action"}),t.jsxs("select",{className:"border p-2 rounded w-full mb-4 text-sm bg-white",value:c.action,onChange:u=>f("action",u.target.value),children:[t.jsx("option",{value:"mixed",disabled:!0,hidden:!0,children:"Mixed"}),t.jsx("option",{value:"none",children:"None"}),t.jsx("option",{value:"photo",children:"Take Photo"}),t.jsx("option",{value:"record_start",children:"Start Recording"}),t.jsx("option",{value:"record_stop",children:"Stop Recording"})]}),t.jsxs("div",{className:"mt-auto flex flex-col gap-2 pt-4",children:[t.jsxs("button",{onClick:w,disabled:!h,className:`w-full p-3 rounded-lg shadow-md flex items-center justify-center gap-2 transition-all font-bold text-white ${h?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"}`,children:[t.jsx(lt,{size:18})," Update Point(s)"]}),d&&t.jsxs("button",{onClick:M,className:"w-full bg-blue-50 hover:bg-blue-100 text-blue-600 p-2 rounded flex items-center justify-center gap-2 transition-colors font-medium border border-blue-200",children:[t.jsx(ct,{size:16})," Insert Waypoint"]}),t.jsxs("button",{onClick:a,className:"w-full bg-red-100 hover:bg-red-200 text-red-600 p-2 rounded flex items-center justify-center gap-2 transition-colors font-medium",children:[t.jsx(Re,{size:16})," Delete Selected"]})]})]})}const xe=({title:e,icon:s,children:o,defaultOpen:i=!1})=>{const[n,a]=O.useState(i);return t.jsxs("div",{className:"border-b border-gray-100 last:border-0",children:[t.jsxs("button",{onClick:()=>a(!n),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-2 font-semibold text-gray-700",children:[t.jsx(s,{size:18,className:"text-blue-600"}),e]}),n?t.jsx(xt,{size:16,className:"text-gray-400"}):t.jsx(bt,{size:16,className:"text-gray-400"})]}),n&&t.jsx("div",{className:"p-3 pt-0 space-y-4 animate-in slide-in-from-top-2 duration-200",children:o})]})};function mn({currentPolygon:e,setCurrentPolygon:s}){var x,D;const{waypoints:o,selectedIds:i,settings:n,setWaypoints:a,updateSelectedWaypoints:r,deleteSelectedWaypoints:c,insertWaypoint:m,undo:h,redo:P,updateSettings:d,resetMission:M,fitMapToWaypoints:f,currentMissionFilename:w,setMissionFilename:k,calculatedMaxSpeed:u,minSegmentDistance:S}=z(),[b,j]=O.useState(!1),[y,L]=O.useState(!1),[R,$]=O.useState({warning:!1,critical:!1}),A=()=>{confirm("Are you sure you want to reset the mission? This will clear all waypoints and shapes.")&&(M(),s(null))},I=()=>{window.mapboxDraw&&window.mapboxDraw.changeMode("simple_select");let l=e;if(window.mapboxDraw){const Pe=window.mapboxDraw.getSelected();if(Pe.features.length>0)l=Pe.features[0],s&&s(l);else if(e&&e.id){const Me=window.mapboxDraw.get(e.id);Me&&(l=Me,s&&s(l))}}if(!l)return alert("Draw a shape first!");const p=z.getState().settings,g=le(p.selectedDrone),N=(g==null?void 0:g.hfov)??p.customFOV,E={...p,customFOV:N},C=Ce(l,E),q=p.photoInterval,{maxSpeed:oe}=Be(C,q),X={...E,speed:oe>0?oe:p.speed},he=Ce(l,X);a(he),setTimeout(()=>{z.getState().calculateMissionMetrics()},50)},T=()=>{z.getState().waypoints.length>0&&e&&I()},F=async l=>{const p=l.target.files[0];if(p)try{const{geojson:g,sessionData:N}=await ln(p),E=[];if(g.features.forEach(C=>{C.geometry.type==="Point"&&E.push({id:ae(),lng:C.geometry.coordinates[0],lat:C.geometry.coordinates[1],altitude:C.properties.altitude!==void 0?C.properties.altitude:n.altitude,speed:C.properties.speed!==void 0?C.properties.speed:n.speed,gimbalPitch:C.properties.gimbalPitch!==void 0?C.properties.gimbalPitch:n.gimbalPitch,heading:C.properties.heading!==void 0?C.properties.heading:0})}),E.length>0){a(E),N?(console.log("Restoring session data:",N),N.settings&&d(N.settings),N.polygon&&s?(console.log("Dispatching restore-polygon event",N.polygon),s(N.polygon),window.dispatchEvent(new CustomEvent("waygen:restore-polygon",{detail:N.polygon}))):console.warn("No polygon in session data or setCurrentPolygon missing",{polygon:N.polygon,fn:!!s}),alert(`Imported ${E.length} waypoints and restored session!`)):alert(`Imported ${E.length} waypoints!`);const C=p.name.replace(/\.(kmz|kml)$/i,"");k(C),setTimeout(()=>{f(),z.getState().calculateMissionMetrics()},100)}else alert("No waypoints found in file.")}catch(g){console.error(g),alert("Failed to parse file. Ensure it is a valid KML/KMZ.")}},H=()=>w||`waygen_${new Date().toISOString().replace(/[-:]/g,"").replace(/\..+/,"").replace("T","_").substring(0,15)}`,v=()=>{j(!0)},J=({filename:l,missionEndAction:p,rcLostAction:g,globalTransitionalSpeed:N})=>{d({missionEndAction:p});const E={settings:n,polygon:e},C={...n,missionEndAction:p,rcLostAction:g,globalTransitionalSpeed:N};Wt(o,C,l,E)},se=l=>{if(l.length<2)return 0;let p=0;for(let g=0;g<l.length-1;g++){const N=_([l[g].lng,l[g].lat]),E=_([l[g+1].lng,l[g+1].lat]);p+=te(N,E,{units:"meters"})}return p},K=l=>{const p=Math.floor(l/60),g=l%60;return`${p}:${g.toString().padStart(2,"0")}`},U=(l,p)=>{if(p==="metric")return l>=1e3?`${(l/1e3).toFixed(2)} km`:`${Math.round(l)} m`;{const g=l*3.28084;return g>=5280?`${(g/5280).toFixed(2)} mi`:`${Math.round(g)} ft`}};if(i.length>0){const l=o.filter(p=>i.includes(p.id));return t.jsx(un,{selectedWaypoints:l,selectedIds:i,waypoints:o,settings:n,onUpdate:r,onDelete:c,onInsert:m})}return t.jsxs("div",{className:"bg-white h-full border-l w-80 flex flex-col shadow-xl z-10 flex-shrink-0",children:[t.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-gray-50",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"font-bold text-xl text-gray-800",children:"Waygen"}),w&&t.jsx("div",{className:"text-sm text-gray-500 truncate max-w-[200px]",title:w,children:w})]}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:A,className:"p-2 hover:bg-red-100 hover:text-red-600 rounded-full shadow-sm border transition-all",title:"Reset Mission",children:t.jsx(Re,{size:16})}),t.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1 self-center"}),t.jsx("button",{onClick:h,className:"p-2 hover:bg-white rounded-full shadow-sm border transition-all",children:t.jsx(dt,{size:16})}),t.jsx("button",{onClick:P,className:"p-2 hover:bg-white rounded-full shadow-sm border transition-all",children:t.jsx(ut,{size:16})})]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:[t.jsx("div",{className:"p-3",children:t.jsxs("label",{className:"flex items-center justify-center gap-2 w-full p-2 bg-blue-50 text-blue-700 rounded-lg border border-blue-100 hover:bg-blue-100 transition-colors cursor-pointer font-medium text-sm",children:[t.jsx(mt,{size:16})," Import KML/KMZ",t.jsx("input",{type:"file",onChange:F,className:"hidden",accept:".kml,.kmz"})]})}),t.jsxs(xe,{title:"Basics",icon:Oe,defaultOpen:!0,children:[t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Units"}),t.jsxs("div",{className:"flex flex-col gap-2 mt-1",children:[t.jsxs("label",{className:"flex items-center cursor-pointer",children:[t.jsx("input",{type:"radio",name:"units",value:"metric",checked:n.units==="metric",onChange:()=>d({units:"metric"}),className:"form-radio h-4 w-4 text-blue-600 focus:ring-blue-500 transition duration-150 ease-in-out"}),t.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Metric (m)"})]}),t.jsxs("label",{className:"flex items-center cursor-pointer",children:[t.jsx("input",{type:"radio",name:"units",value:"imperial",checked:n.units==="imperial",onChange:()=>d({units:"imperial"}),className:"form-radio h-4 w-4 text-blue-600 focus:ring-blue-500 transition duration-150 ease-in-out"}),t.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Imperial (ft)"})]})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:["Altitude (",n.units==="metric"?"m":"ft",")"]}),t.jsx("input",{type:"number",value:Y(n.altitude,n.units),onChange:l=>{d({altitude:re(Number(l.target.value),n.units)}),T()},className:"w-full border rounded p-1.5 text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),t.jsxs("div",{className:"mt-4 border-t pt-3",children:[t.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Drone Model (FOV)"}),t.jsx("select",{value:je(n.selectedDrone),onChange:l=>{const p=l.target.value,g=Z[p];let N,E;p==="custom"?(N=n.customFOV,E=n.photoInterval):(N=(g==null?void 0:g.hfov)||82.1,E=(g==null?void 0:g.photoInterval)||DEFAULT_PHOTO_INTERVAL),d({selectedDrone:p,customFOV:N,photoInterval:E}),T()},className:"w-full border rounded p-1.5 text-sm bg-gray-50 focus:ring-2 focus:ring-blue-500 outline-none",children:Ot().map(l=>{const p=Z[l];return t.jsxs("option",{value:l,children:[p.name," ",p.hfov?`(${p.hfov}°)`:""]},l)})})]}),t.jsxs("div",{className:"mt-2",children:[t.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Photo Interval (seconds)"}),t.jsx("input",{type:"number",step:"0.1",min:"0.1",value:n.photoInterval,onChange:l=>d({photoInterval:Number(l.target.value)}),className:"w-full border rounded p-1.5 text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]}),n.selectedDrone==="custom"&&t.jsxs("div",{className:"mt-2",children:[t.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Custom HFOV (°)"}),t.jsx("input",{type:"number",value:n.customFOV,onChange:l=>d({customFOV:Number(l.target.value)}),className:"w-full border rounded p-1.5 text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),t.jsxs(xe,{title:"Coverage",icon:pt,defaultOpen:!0,children:[t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Path Type"}),t.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:[t.jsx("button",{onClick:()=>d({pathType:"grid"}),className:`flex-1 py-1 text-xs font-bold rounded-md transition-all ${n.pathType==="grid"?"bg-white shadow text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Grid"}),t.jsx("button",{onClick:()=>d({pathType:"orbit",spacing:10}),className:`flex-1 py-1 text-xs font-bold rounded-md transition-all ${n.pathType==="orbit"?"bg-white shadow text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Orbit"})]})]}),n.pathType==="grid"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsxs("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:["Side Overlap ",n.sideOverlap,"%"]}),t.jsx("input",{type:"range",min:"0",max:"90",value:n.sideOverlap,onChange:l=>d({sideOverlap:Number(l.target.value)}),onMouseUp:T,onTouchEnd:T,className:"w-full accent-blue-600"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:["Front Overlap ",n.frontOverlap,"%"]}),t.jsx("input",{type:"range",min:"0",max:"90",value:n.frontOverlap,onChange:l=>d({frontOverlap:Number(l.target.value)}),onMouseUp:T,onTouchEnd:T,className:"w-full accent-blue-600"})]}),t.jsxs("div",{className:"flex items-center justify-between mt-2",children:[t.jsx("label",{className:"text-sm text-gray-700",children:"Auto Path Angle"}),t.jsx("input",{type:"checkbox",checked:n.autoDirection,onChange:l=>{d({autoDirection:l.target.checked}),T()},className:"accent-blue-600 w-4 h-4"})]}),t.jsxs("div",{className:`mt-2 transition-opacity ${n.autoDirection?"opacity-50":"opacity-100"}`,children:[t.jsxs("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:["Path Angle ",n.angle,"°"]}),t.jsx("input",{type:"range",min:"0",max:"360",value:n.angle,onChange:l=>d({angle:Number(l.target.value)}),disabled:n.autoDirection,className:`w-full ${n.autoDirection?"accent-gray-400 cursor-not-allowed":"accent-blue-600"}`,onMouseUp:T,onTouchEnd:T})]})]}):t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:["Spacing (",n.units==="metric"?"m":"ft",")"]}),t.jsx("input",{type:"number",min:"1",value:Y(n.spacing,n.units),onChange:l=>d({spacing:re(Number(l.target.value),n.units)}),className:"w-full border rounded p-1.5 text-sm focus:ring-2 focus:ring-blue-500 outline-none"}),t.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"Distance between waypoints along the perimeter."})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:["Start Angle ",n.startAngle,"°"]}),t.jsx("input",{type:"range",min:"0",max:"360",value:n.startAngle,onChange:l=>d({startAngle:Number(l.target.value)}),className:"w-full accent-blue-600"})]})]}),t.jsxs("div",{className:"flex items-center justify-between mt-2",children:[t.jsx("label",{className:"text-sm text-gray-700",children:"Reverse Path"}),t.jsx("input",{type:"checkbox",checked:n.pathType==="orbit"?n.direction==="clockwise":n.reversePath,onChange:l=>{n.pathType==="orbit"?d({direction:n.direction==="counter-clockwise"?"clockwise":"counter-clockwise"}):d({reversePath:l.target.checked}),T()},className:"accent-blue-600 w-4 h-4"})]}),t.jsxs("div",{className:"flex items-center justify-between mt-3",children:[t.jsx("label",{className:"text-sm text-gray-700",children:"Straighten Legs"}),t.jsx("input",{type:"checkbox",checked:n.straightenLegs,onChange:l=>d({straightenLegs:l.target.checked}),className:"accent-blue-600 w-4 h-4"})]}),t.jsxs("div",{className:"flex items-center justify-between mt-3",children:[t.jsx("label",{className:"text-sm text-gray-700",children:"Generate Every Point"}),t.jsx("input",{type:"checkbox",checked:n.generateEveryPoint,onChange:l=>{d({generateEveryPoint:l.target.checked}),T()},className:"accent-blue-600 w-4 h-4"})]}),t.jsxs("div",{className:"flex items-center justify-between mt-3",children:[t.jsx("label",{className:"text-sm text-gray-700",title:"Locks the drone heading to the first leg's direction for the entire mission. Useful for surveys where orientation doesn't matter.",children:"Eliminate Extra Yaw Maneuvers"}),t.jsx("input",{type:"checkbox",checked:n.eliminateExtraYaw,onChange:l=>{d({eliminateExtraYaw:l.target.checked}),T()},className:"accent-blue-600 w-4 h-4"})]}),t.jsxs("div",{className:"flex items-center justify-between mt-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm text-gray-700",children:"Show Image Footprints"}),n.showFootprints&&t.jsx("input",{type:"color",value:n.footprintColor,onChange:l=>d({footprintColor:l.target.value}),className:"w-4 h-4 rounded border border-gray-300 cursor-pointer",title:"Choose footprint color"})]}),t.jsx("input",{type:"checkbox",checked:n.showFootprints,onChange:l=>d({showFootprints:l.target.checked}),className:"accent-blue-600 w-4 h-4"})]}),n.showFootprints&&(()=>{const l=n.customFOV||82.1,g=2*n.altitude*Math.tan(l*Math.PI/360),N=g*(3/4),E=Y(g,n.units).toFixed(1),C=Y(N,n.units).toFixed(1),q=n.units==="metric"?"m":"ft";return t.jsxs("div",{className:"mt-0 text-xs text-gray-500",children:["Est. Size: ",E," x ",C," ",q]})})()]}),t.jsxs(xe,{title:"Camera",icon:gt,defaultOpen:!0,children:[t.jsxs("div",{children:[t.jsxs("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:["Gimbal Pitch ",n.gimbalPitch,"°"]}),t.jsx("input",{type:"range",min:"-90",max:"0",value:n.gimbalPitch,onChange:l=>d({gimbalPitch:Number(l.target.value)}),className:"w-full accent-blue-600"})]}),t.jsxs("div",{className:"mt-2",children:[t.jsx("label",{className:"text-xs font-bold text-gray-500 mb-1 block",children:"Action per Waypoint"}),t.jsxs("select",{value:n.waypointAction,onChange:l=>d({waypointAction:l.target.value}),className:"w-full border rounded p-1.5 text-sm bg-gray-50 focus:ring-2 focus:ring-blue-500 outline-none",children:[t.jsx("option",{value:"none",children:"No Action"}),t.jsx("option",{value:"photo",children:"Take Photo"}),t.jsx("option",{value:"record",children:"Start/Stop Recording"})]})]})]})]}),t.jsxs("div",{className:"p-4 border-t bg-gray-50",children:[t.jsxs("button",{onClick:I,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold p-3 rounded-lg shadow-md mb-3 flex items-center justify-center gap-2 transition-all transform active:scale-95",children:[t.jsx(ht,{size:18})," Generate Path"]}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("div",{className:"bg-white border rounded p-2 text-center",children:[t.jsx("div",{className:"text-xs text-gray-400 font-bold uppercase",children:"Waypoints"}),t.jsx("div",{className:"font-bold text-gray-700",children:o.length})]}),t.jsxs("div",{className:"bg-white border rounded p-2 text-center",children:[t.jsx("div",{className:"text-xs text-gray-400 font-bold uppercase",children:"Distance"}),t.jsx("div",{className:"font-bold text-gray-700",children:o.length>=2?U(se(o),n.units):n.units==="metric"?"0 m":"0 ft"})]}),t.jsxs("div",{className:"bg-white border rounded p-2 text-center",children:[t.jsx("div",{className:"text-xs text-gray-400 font-bold uppercase",children:"Max Speed"}),t.jsx("div",{className:"font-bold text-gray-700",title:`Based on ${Math.round(S)}m minimum segment`,children:o.length>=2&&u>0?`${Y(u,n.units).toFixed(1)} ${n.units==="metric"?"m/s":"ft/s"}`:n.units==="metric"?"0 m/s":"0 ft/s"})]}),t.jsxs("div",{className:`bg-white border rounded p-2 text-center ${(()=>{const l=z.getState().getFlightWarningLevel();return l==="critical"?"border-red-500 bg-red-50":l==="warning"?"border-yellow-500 bg-yellow-50":""})()}`,children:[t.jsx("div",{className:"text-xs text-gray-400 font-bold uppercase",children:"Est. Time"}),t.jsx("div",{className:`font-bold ${(()=>{const l=z.getState().getFlightWarningLevel();return l==="critical"?"text-red-600":l==="warning"?"text-yellow-700":"text-gray-700"})()}`,children:o.length>=2&&u>0?(()=>{const l=z.getState().getMissionTime(),p=z.getState().getFlightWarningLevel(),g=K(l),N=p==="critical"?" 🔴":p==="warning"?" ⚠️":"";return p!=="safe"&&!R[p]&&setTimeout(()=>{L(!0),$(E=>({...E,[p]:!0}))},500),t.jsxs("span",{title:`${l}s total`,children:[g,N]})})():"0:00"})]})]}),t.jsxs("button",{onClick:v,disabled:o.length===0,className:"w-full mt-3 bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold p-3 rounded-lg shadow-md flex items-center justify-center gap-2 transition-all",children:[t.jsx(ft,{size:18})," Download KMZ"]})]}),t.jsx(cn,{isOpen:b,onClose:()=>j(!1),onDownload:J,defaultFilename:H(),defaultMissionEndAction:n.missionEndAction,units:n.units}),t.jsx(dn,{isOpen:y,onClose:()=>L(!1),warningLevel:z.getState().getFlightWarningLevel(),missionTime:o.length>=2?K(z.getState().getMissionTime()):"0:00",droneName:((x=le(n.selectedDrone))==null?void 0:x.name)||"Unknown Drone",maxFlightTime:((D=le(n.selectedDrone))==null?void 0:D.maxFlightTime)||0})]})}const pn=pe.lazy(()=>ze(()=>import("./SearchBar-SIN3yldU.js"),__vite__mapDeps([0,1,2,3,4,5]))),gn=pe.lazy(()=>ze(()=>import("./MapContainer-BE4WlgPM.js"),__vite__mapDeps([6,1,2,3,4,7,5])));function hn(){const[e,s]=O.useState(null),[o,i]=O.useState(!0);return pe.useEffect(()=>{const n=setTimeout(()=>i(!1),1e3);return()=>clearTimeout(n)},[]),o?t.jsx("div",{className:"flex h-screen w-screen items-center justify-center bg-gray-50",children:t.jsx("div",{className:"text-2xl font-bold text-blue-600 animate-pulse",children:"Waygen Loading..."})}):t.jsxs("div",{className:"flex h-screen w-screen overflow-hidden",children:[t.jsxs("div",{className:"relative flex-grow",children:[t.jsx(O.Suspense,{fallback:null,children:t.jsx(pn,{})}),t.jsx(O.Suspense,{fallback:t.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gray-100",children:t.jsx("div",{className:"text-lg font-semibold text-gray-500",children:"Loading Map..."})}),children:t.jsx(gn,{onPolygonDrawn:s,polygon:e})})]}),t.jsx(mn,{currentPolygon:e,setCurrentPolygon:s})]})}we.createRoot(document.getElementById("root")).render(t.jsx(pe.StrictMode,{children:t.jsx(hn,{})}));export{yn as c,t as j,z as u};
